import{r,h as t,H as a}from"./p-0ee570cd.js";import{h as e,U as o}from"./p-3c9aa206.js";import{C as s}from"./p-0b1fabf5.js";import{s as i}from"./p-0752f2ba.js";import{S as c}from"./p-e51bb952.js";import"./p-338c7261.js";var n=function(r,t,a,e){var o,s=arguments.length,i=s<3?t:null===e?e=Object.getOwnPropertyDescriptor(t,a):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(r,t,a,e);else for(var c=r.length-1;c>=0;c--)(o=r[c])&&(i=(s<3?o(i):s>3?o(t,a,i):o(t,a))||i);return s>3&&i&&Object.defineProperty(t,a,i),i};const d=class{constructor(t){r(this,t),this.participantQuery="",this.isProcessing=!1,this.t=e(),this.transcriptions=[],this.autoScrollEnabled=!0,this.onScroll=r=>{const{scrollTop:t,clientHeight:a,scrollHeight:e}=r.target;this.autoScrollEnabled=t+a+10>=e},this.onTranscriptHandler=r=>{this.transcriptions=this.transcriptionsReducer(this.transcriptions,r)}}transcriptionsReducer(r,t){if(!r.length||r[r.length-1].peerId!==t.peerId)return r.concat(t);const a=r[r.length-1];return a.id===t.id?(a.transcript=t.transcript,r.pop(),r.concat(a)):r.concat(t)}connectedCallback(){this.meeting&&this.meetingChanged(this.meeting)}componentDidLoad(){var r;null===(r=this.contentContainer)||void 0===r||r.addEventListener("scroll",this.onScroll)}disconnectedCallback(){var r,t,a;null===(t=null===(r=this.meeting)||void 0===r?void 0:r.ai)||void 0===t||t.off("transcript",this.onTranscriptHandler),null===(a=this.contentContainer)||void 0===a||a.removeEventListener("scroll",this.onScroll)}meetingChanged(r){var t,a;this.transcriptions=o(null===(t=null==r?void 0:r.ai)||void 0===t?void 0:t.transcripts),this.transcriptions=this.transcriptions.reduce(this.transcriptionsReducer,[]),null===(a=null==r?void 0:r.ai)||void 0===a||a.on("transcript",this.onTranscriptHandler)}transcriptionsChanged(){this.autoScrollEnabled&&setTimeout((()=>{i(this.contentContainer,!1)}),100)}renderTranscripts(){const r=this.transcriptions.filter((r=>!this.participantQuery||r.name.toLowerCase().includes(this.participantQuery.toLowerCase()))),a=[];return r.forEach((r=>{const t={name:r.name,date:r.date,peerId:r.peerId,transcript:r.transcript};if(!a.length)return void a.push(t);const e=a[a.length-1];r.peerId===e.peerId?e.transcript+=" "+r.transcript:a.push(t)})),a.map((r=>t("div",{class:"message"},t(s,{name:r.name,time:new Date(r.date),now:new Date}),t("div",{class:"body"},r.transcript))))}render(){return t(a,{key:"f9d8cea8917ddb558fd721020c71e32964c4e653"},t("div",{key:"b35cf0970ccf2b813c99976e1554c2a4dc60ac12",class:"search-bar"},t("input",{key:"d6c84982fbf1f5b7c9b8264228f622ca74d60672",type:"text",placeholder:"Search Participant",value:this.participantQuery,onInput:r=>this.participantQuery=r.target.value})),this.isProcessing&&t("div",{key:"fbd031e9acdd967e2e81bcb655d3ff80a33210f5",class:"processing"},t("p",{key:"7ee274172423aaac3f286f9463ae2c2b0a01d09e"},"Processing audio....")),!this.isProcessing&&t("div",{key:"e07f3a7314132300113f955e7a83bc2ca18e6bc5",class:"content scrollbar",ref:r=>this.contentContainer=r},t("div",{key:"3ffd0b4a02a6aaa136a282f145772e2f3afd3bc1",class:"started-message"},"Transcription started"),this.renderTranscripts()))}static get watchers(){return{meeting:["meetingChanged"],transcriptions:["transcriptionsChanged"]}}};n([c()],d.prototype,"t",void 0),n([c()],d.prototype,"meeting",void 0),d.style=":host{line-height:initial;font-family:var(--rtk-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--rtk-space-0, 0px);padding:var(--rtk-space-0, 0px)}.head{display:flex;align-items:center}.head .name{margin-right:var(--rtk-space-4, 16px);font-size:12px;font-weight:700}.head .time{font-size:12px;color:rgb(var(--rtk-colors-text-800, 255 255 255 / 0.76))}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--rtk-scrollbar-color, rgb(var(--rtk-colors-background-600, 60 60 60)))\n    var(--rtk-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--rtk-space-1\\.5, 6px);width:var(--rtk-space-1\\.5, 6px);border-radius:9999px;background-color:var(--rtk-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--rtk-scrollbar-color, rgb(var(--rtk-colors-background-600, 60 60 60)))}*{box-sizing:border-box;border-width:0;border-style:solid}:host{width:100%;display:flex;flex-direction:column}.processing{display:flex;flex:1 1 0%;flex-direction:column;align-items:center;justify-content:center}.content{box-sizing:border-box;display:flex;flex-direction:column;padding:var(--rtk-space-3, 12px);flex:1 0 0px;overflow-y:scroll}.started-message{margin-top:var(--rtk-space-5, 20px);margin-bottom:var(--rtk-space-5, 20px);text-align:center;font-size:12px;color:rgb(var(--rtk-colors-text-700, 255 255 255 / 0.64))}.search-bar{height:var(--rtk-space-14, 56px);width:100%;border-bottom-width:var(--rtk-border-width-sm, 1px);--tw-border-opacity:1;border-color:rgba(var(--rtk-colors-background-600, 60 60 60) / var(--tw-border-opacity));padding:var(--rtk-space-3, 12px)}input{height:100%;width:100%;--tw-bg-opacity:1;background-color:rgba(var(--rtk-colors-background-600, 60 60 60) / var(--tw-bg-opacity));padding-left:var(--rtk-space-3, 12px);padding-right:var(--rtk-space-3, 12px);font-size:14px;border-radius:var(--rtk-border-radius-sm, 4px);color:rgb(var(--rtk-colors-text-1000, 255 255 255))}.caption-view{height:var(--rtk-space-12, 48px);width:100%;padding-left:var(--rtk-space-3, 12px);padding-right:var(--rtk-space-3, 12px);padding-top:var(--rtk-space-3, 12px);padding-bottom:var(--rtk-space-3, 12px);border-bottom-width:var(--rtk-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--rtk-colors-background-600, 60 60 60) / var(--tw-border-opacity));display:flex;align-items:center;justify-content:space-between;font-size:14px}.message .body{margin-top:var(--rtk-space-2, 8px);margin-bottom:var(--rtk-space-2, 8px);font-size:14px;word-break:break-word}.message{margin-bottom:var(--rtk-space-3, 12px)}.message:last-child{margin-bottom:var(--rtk-space-0, 0px)}";export{d as rtk_ai_transcriptions}