const t=["top","right","bottom","left"],n=["start","end"],e=t.reduce(((t,e)=>t.concat(e,e+"-"+n[0],e+"-"+n[1])),[]),o=Math.min,r=Math.max,i=Math.round,a=t=>({x:t,y:t}),c={left:"right",right:"left",bottom:"top",top:"bottom"},l={start:"end",end:"start"};function s(t,n,e){return r(t,o(n,e))}function u(t,n){return"function"==typeof t?t(n):t}function f(t){return t.split("-")[0]}function d(t){return t.split("-")[1]}function m(t){return"x"===t?"y":"x"}function p(t){return"y"===t?"height":"width"}const y=new Set(["top","bottom"]);function h(t){return y.has(f(t))?"y":"x"}function w(t){return m(h(t))}function g(t,n,e){void 0===e&&(e=!1);const o=d(t),r=w(t),i=p(r);let a="x"===r?o===(e?"end":"start")?"right":"left":"start"===o?"bottom":"top";return n.reference[i]>n.floating[i]&&(a=k(a)),[a,k(a)]}function x(t){return t.replace(/start|end/g,(t=>l[t]))}const v=["left","right"],b=["right","left"],A=["top","bottom"],S=["bottom","top"];function k(t){return t.replace(/left|right|bottom|top/g,(t=>c[t]))}function C(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function P(t){const{x:n,y:e,width:o,height:r}=t;return{width:o,height:r,top:e,left:n,right:n+o,bottom:e+r,x:n,y:e}}function R(t,n,e){let{reference:o,floating:r}=t;const i=h(n),a=w(n),c=p(a),l=f(n),s="y"===i,u=o.x+o.width/2-r.width/2,m=o.y+o.height/2-r.height/2,y=o[c]/2-r[c]/2;let g;switch(l){case"top":g={x:u,y:o.y-r.height};break;case"bottom":g={x:u,y:o.y+o.height};break;case"right":g={x:o.x+o.width,y:m};break;case"left":g={x:o.x-r.width,y:m};break;default:g={x:o.x,y:o.y}}switch(d(n)){case"start":g[a]-=y*(e&&s?-1:1);break;case"end":g[a]+=y*(e&&s?-1:1)}return g}async function D(t,n){var e;void 0===n&&(n={});const{x:o,y:r,platform:i,rects:a,elements:c,strategy:l}=t,{boundary:s="clippingAncestors",rootBoundary:f="viewport",elementContext:d="floating",altBoundary:m=!1,padding:p=0}=u(n,t),y=C(p),h=c[m?"floating"===d?"reference":"floating":d],w=P(await i.getClippingRect({element:null==(e=await(null==i.isElement?void 0:i.isElement(h)))||e?h:h.contextElement||await(null==i.getDocumentElement?void 0:i.getDocumentElement(c.floating)),boundary:s,rootBoundary:f,strategy:l})),g="floating"===d?{x:o,y:r,width:a.floating.width,height:a.floating.height}:a.reference,x=await(null==i.getOffsetParent?void 0:i.getOffsetParent(c.floating)),v=await(null==i.isElement?void 0:i.isElement(x))&&await(null==i.getScale?void 0:i.getScale(x))||{x:1,y:1},b=P(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:g,offsetParent:x,strategy:l}):g);return{top:(w.top-b.top+y.top)/v.y,bottom:(b.bottom-w.bottom+y.bottom)/v.y,left:(w.left-b.left+y.left)/v.x,right:(b.right-w.right+y.right)/v.x}}function F(t,n){return{top:t.top-n.height,right:t.right-n.width,bottom:t.bottom-n.height,left:t.left-n.width}}function O(n){return t.some((t=>n[t]>=0))}const T=new Set(["left","top"]);function B(){return"undefined"!=typeof window}function H(t){return E(t)?(t.nodeName||"").toLowerCase():"#document"}function L(t){var n;return(null==t||null==(n=t.ownerDocument)?void 0:n.defaultView)||window}function M(t){var n;return null==(n=(E(t)?t.ownerDocument:t.document)||window.document)?void 0:n.documentElement}function E(t){return!!B()&&(t instanceof Node||t instanceof L(t).Node)}function N(t){return!!B()&&(t instanceof Element||t instanceof L(t).Element)}function j(t){return!!B()&&(t instanceof HTMLElement||t instanceof L(t).HTMLElement)}function $(t){return!(!B()||"undefined"==typeof ShadowRoot)&&(t instanceof ShadowRoot||t instanceof L(t).ShadowRoot)}const V=new Set(["inline","contents"]);function W(t){const{overflow:n,overflowX:e,overflowY:o,display:r}=Z(t);return/auto|scroll|overlay|hidden|clip/.test(n+o+e)&&!V.has(r)}const X=new Set(["table","td","th"]);function Y(t){return X.has(H(t))}const _=[":popover-open",":modal"];function q(t){return _.some((n=>{try{return t.matches(n)}catch(t){return!1}}))}const z=["transform","translate","scale","rotate","perspective"],G=["transform","translate","scale","rotate","perspective","filter"],I=["paint","layout","strict","content"];function J(t){const n=K(),e=N(t)?Z(t):t;return z.some((t=>!!e[t]&&"none"!==e[t]))||!!e.containerType&&"normal"!==e.containerType||!n&&!!e.backdropFilter&&"none"!==e.backdropFilter||!n&&!!e.filter&&"none"!==e.filter||G.some((t=>(e.willChange||"").includes(t)))||I.some((t=>(e.contain||"").includes(t)))}function K(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const Q=new Set(["html","body","#document"]);function U(t){return Q.has(H(t))}function Z(t){return L(t).getComputedStyle(t)}function tt(t){return N(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function nt(t){if("html"===H(t))return t;const n=t.assignedSlot||t.parentNode||$(t)&&t.host||M(t);return $(n)?n.host:n}function et(t){const n=nt(t);return U(n)?t.ownerDocument?t.ownerDocument.body:t.body:j(n)&&W(n)?n:et(n)}function ot(t,n,e){var o;void 0===n&&(n=[]),void 0===e&&(e=!0);const r=et(t),i=r===(null==(o=t.ownerDocument)?void 0:o.body),a=L(r);if(i){const t=rt(a);return n.concat(a,a.visualViewport||[],W(r)?r:[],t&&e?ot(t):[])}return n.concat(r,ot(r,[],e))}function rt(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function it(t){const n=Z(t);let e=parseFloat(n.width)||0,o=parseFloat(n.height)||0;const r=j(t),a=r?t.offsetWidth:e,c=r?t.offsetHeight:o,l=i(e)!==a||i(o)!==c;return l&&(e=a,o=c),{width:e,height:o,$:l}}function at(t){return N(t)?t:t.contextElement}function ct(t){const n=at(t);if(!j(n))return a(1);const e=n.getBoundingClientRect(),{width:o,height:r,$:c}=it(n);let l=(c?i(e.width):e.width)/o,s=(c?i(e.height):e.height)/r;return l&&Number.isFinite(l)||(l=1),s&&Number.isFinite(s)||(s=1),{x:l,y:s}}const lt=a(0);function st(t){const n=L(t);return K()&&n.visualViewport?{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}:lt}function ut(t,n,e,o){void 0===n&&(n=!1),void 0===e&&(e=!1);const r=t.getBoundingClientRect(),i=at(t);let c=a(1);n&&(o?N(o)&&(c=ct(o)):c=ct(t));const l=function(t,n,e){return void 0===n&&(n=!1),!(!e||n&&e!==L(t))&&n}(i,e,o)?st(i):a(0);let s=(r.left+l.x)/c.x,u=(r.top+l.y)/c.y,f=r.width/c.x,d=r.height/c.y;if(i){const t=L(i),n=o&&N(o)?L(o):o;let e=t,r=rt(e);for(;r&&o&&n!==e;){const t=ct(r),n=r.getBoundingClientRect(),o=Z(r),i=n.left+(r.clientLeft+parseFloat(o.paddingLeft))*t.x,a=n.top+(r.clientTop+parseFloat(o.paddingTop))*t.y;s*=t.x,u*=t.y,f*=t.x,d*=t.y,s+=i,u+=a,e=L(r),r=rt(e)}}return P({width:f,height:d,x:s,y:u})}function ft(t,n){const e=tt(t).scrollLeft;return n?n.left+e:ut(M(t)).left+e}function dt(t,n){const e=t.getBoundingClientRect();return{x:e.left+n.scrollLeft-ft(t,e),y:e.top+n.scrollTop}}const mt=new Set(["absolute","fixed"]);function pt(t,n,e){let o;if("viewport"===n)o=function(t,n){const e=L(t),o=M(t),r=e.visualViewport;let i=o.clientWidth,a=o.clientHeight,c=0,l=0;if(r){i=r.width,a=r.height;const t=K();(!t||t&&"fixed"===n)&&(c=r.offsetLeft,l=r.offsetTop)}const s=ft(o);if(s<=0){const t=o.ownerDocument,n=t.body,e=getComputedStyle(n),r="CSS1Compat"===t.compatMode&&parseFloat(e.marginLeft)+parseFloat(e.marginRight)||0,a=Math.abs(o.clientWidth-n.clientWidth-r);a<=25&&(i-=a)}else s<=25&&(i+=s);return{width:i,height:a,x:c,y:l}}(t,e);else if("document"===n)o=function(t){const n=M(t),e=tt(t),o=t.ownerDocument.body,i=r(n.scrollWidth,n.clientWidth,o.scrollWidth,o.clientWidth),a=r(n.scrollHeight,n.clientHeight,o.scrollHeight,o.clientHeight);let c=-e.scrollLeft+ft(t);const l=-e.scrollTop;return"rtl"===Z(o).direction&&(c+=r(n.clientWidth,o.clientWidth)-i),{width:i,height:a,x:c,y:l}}(M(t));else if(N(n))o=function(t,n){const e=ut(t,!0,"fixed"===n),o=e.top+t.clientTop,r=e.left+t.clientLeft,i=j(t)?ct(t):a(1);return{width:t.clientWidth*i.x,height:t.clientHeight*i.y,x:r*i.x,y:o*i.y}}(n,e);else{const e=st(t);o={x:n.x-e.x,y:n.y-e.y,width:n.width,height:n.height}}return P(o)}function yt(t,n){const e=nt(t);return!(e===n||!N(e)||U(e))&&("fixed"===Z(e).position||yt(e,n))}function ht(t,n,e){const o=j(n),r=M(n),i="fixed"===e,c=ut(t,!0,i,n);let l={scrollLeft:0,scrollTop:0};const s=a(0);function u(){s.x=ft(r)}if(o||!o&&!i)if(("body"!==H(n)||W(r))&&(l=tt(n)),o){const t=ut(n,!0,i,n);s.x=t.x+n.clientLeft,s.y=t.y+n.clientTop}else r&&u();i&&!o&&r&&u();const f=!r||o||i?a(0):dt(r,l);return{x:c.left+l.scrollLeft-s.x-f.x,y:c.top+l.scrollTop-s.y-f.y,width:c.width,height:c.height}}function wt(t){return"static"===Z(t).position}function gt(t,n){if(!j(t)||"fixed"===Z(t).position)return null;if(n)return n(t);let e=t.offsetParent;return M(t)===e&&(e=e.ownerDocument.body),e}function xt(t,n){const e=L(t);if(q(t))return e;if(!j(t)){let n=nt(t);for(;n&&!U(n);){if(N(n)&&!wt(n))return n;n=nt(n)}return e}let o=gt(t,n);for(;o&&Y(o)&&wt(o);)o=gt(o,n);return o&&U(o)&&wt(o)&&!J(o)?e:o||function(t){let n=nt(t);for(;j(n)&&!U(n);){if(J(n))return n;if(q(n))return null;n=nt(n)}return null}(t)||e}const vt={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{elements:n,rect:e,offsetParent:o,strategy:r}=t;const i="fixed"===r,c=M(o),l=!!n&&q(n.floating);if(o===c||l&&i)return e;let s={scrollLeft:0,scrollTop:0},u=a(1);const f=a(0),d=j(o);if((d||!d&&!i)&&(("body"!==H(o)||W(c))&&(s=tt(o)),j(o))){const t=ut(o);u=ct(o),f.x=t.x+o.clientLeft,f.y=t.y+o.clientTop}const m=!c||d||i?a(0):dt(c,s);return{width:e.width*u.x,height:e.height*u.y,x:e.x*u.x-s.scrollLeft*u.x+f.x+m.x,y:e.y*u.y-s.scrollTop*u.y+f.y+m.y}},getDocumentElement:M,getClippingRect:function(t){let{element:n,boundary:e,rootBoundary:i,strategy:a}=t;const c=[..."clippingAncestors"===e?q(n)?[]:function(t,n){const e=n.get(t);if(e)return e;let o=ot(t,[],!1).filter((t=>N(t)&&"body"!==H(t))),r=null;const i="fixed"===Z(t).position;let a=i?nt(t):t;for(;N(a)&&!U(a);){const n=Z(a),e=J(a);e||"fixed"!==n.position||(r=null),(i?!e&&!r:!e&&"static"===n.position&&r&&mt.has(r.position)||W(a)&&!e&&yt(t,a))?o=o.filter((t=>t!==a)):r=n,a=nt(a)}return n.set(t,o),o}(n,this._c):[].concat(e),i],l=c.reduce(((t,e)=>{const i=pt(n,e,a);return t.top=r(i.top,t.top),t.right=o(i.right,t.right),t.bottom=o(i.bottom,t.bottom),t.left=r(i.left,t.left),t}),pt(n,c[0],a));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:xt,getElementRects:async function(t){const n=this.getOffsetParent||xt,e=this.getDimensions,o=await e(t.floating);return{reference:ht(t.reference,await n(t.floating),t.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){const{width:n,height:e}=it(t);return{width:n,height:e}},getScale:ct,isElement:N,isRTL:function(t){return"rtl"===Z(t).direction}},bt=function(t){return void 0===t&&(t=0),{name:"offset",options:t,async fn(n){var e,o;const{x:r,y:i,placement:a,middlewareData:c}=n,l=await async function(t,n){const{placement:e,platform:o,elements:r}=t,i=await(null==o.isRTL?void 0:o.isRTL(r.floating)),a=f(e),c=d(e),l="y"===h(e),s=T.has(a)?-1:1,m=i&&l?-1:1,p=u(n,t);let{mainAxis:y,crossAxis:w,alignmentAxis:g}="number"==typeof p?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return c&&"number"==typeof g&&(w="end"===c?-1*g:g),l?{x:w*m,y:y*s}:{x:y*s,y:w*m}}(n,t);return a===(null==(e=c.offset)?void 0:e.placement)&&null!=(o=c.arrow)&&o.alignmentOffset?{}:{x:r+l.x,y:i+l.y,data:{...l,placement:a}}}}},At=function(t){return void 0===t&&(t={}),{name:"autoPlacement",options:t,async fn(n){var o,r,i;const{rects:a,middlewareData:c,placement:l,platform:s,elements:m}=n,{crossAxis:p=!1,alignment:y,allowedPlacements:h=e,autoAlignment:w=!0,...v}=u(t,n),b=void 0!==y||h===e?function(t,n,e){return(t?[...e.filter((n=>d(n)===t)),...e.filter((n=>d(n)!==t))]:e.filter((t=>f(t)===t))).filter((e=>!t||d(e)===t||!!n&&x(e)!==e))}(y||null,w,h):h,A=await D(n,v),S=(null==(o=c.autoPlacement)?void 0:o.index)||0,k=b[S];if(null==k)return{};const C=g(k,a,await(null==s.isRTL?void 0:s.isRTL(m.floating)));if(l!==k)return{reset:{placement:b[0]}};const P=[A[f(k)],A[C[0]],A[C[1]]],R=[...(null==(r=c.autoPlacement)?void 0:r.overflows)||[],{placement:k,overflows:P}],F=b[S+1];if(F)return{data:{index:S+1,overflows:R},reset:{placement:F}};const O=R.map((t=>{const n=d(t.placement);return[t.placement,n&&p?t.overflows.slice(0,2).reduce(((t,n)=>t+n),0):t.overflows[0],t.overflows]})).sort(((t,n)=>t[1]-n[1])),T=(null==(i=O.filter((t=>t[2].slice(0,d(t[0])?2:3).every((t=>t<=0))))[0])?void 0:i[0])||O[0][0];return T!==l?{data:{index:S+1,overflows:R},reset:{placement:T}}:{}}}},St=function(t){return void 0===t&&(t={}),{name:"shift",options:t,async fn(n){const{x:e,y:o,placement:r}=n,{mainAxis:i=!0,crossAxis:a=!1,limiter:c={fn:t=>{let{x:n,y:e}=t;return{x:n,y:e}}},...l}=u(t,n),d={x:e,y:o},p=await D(n,l),y=h(f(r)),w=m(y);let g=d[w],x=d[y];i&&(g=s(g+p["y"===w?"top":"left"],g,g-p["y"===w?"bottom":"right"])),a&&(x=s(x+p["y"===y?"top":"left"],x,x-p["y"===y?"bottom":"right"]));const v=c.fn({...n,[w]:g,[y]:x});return{...v,data:{x:v.x-e,y:v.y-o,enabled:{[w]:i,[y]:a}}}}}},kt=function(t){return void 0===t&&(t={}),{name:"flip",options:t,async fn(n){var e,o;const{placement:r,middlewareData:i,rects:a,initialPlacement:c,platform:l,elements:s}=n,{mainAxis:m=!0,crossAxis:p=!0,fallbackPlacements:y,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:P=!0,...R}=u(t,n);if(null!=(e=i.arrow)&&e.alignmentOffset)return{};const F=f(r),O=h(c),T=f(c)===c,B=await(null==l.isRTL?void 0:l.isRTL(s.floating)),H=y||(T||!P?[k(c)]:function(t){const n=k(t);return[x(t),n,x(n)]}(c)),L="none"!==C;!y&&L&&H.push(...function(t,n,e,o){const r=d(t);let i=function(t,n,e){switch(t){case"top":case"bottom":return e?n?b:v:n?v:b;case"left":case"right":return n?A:S;default:return[]}}(f(t),"start"===e,o);return r&&(i=i.map((t=>t+"-"+r)),n&&(i=i.concat(i.map(x)))),i}(c,P,C,B));const M=[c,...H],E=await D(n,R),N=[];let j=(null==(o=i.flip)?void 0:o.overflows)||[];if(m&&N.push(E[F]),p){const t=g(r,a,B);N.push(E[t[0]],E[t[1]])}if(j=[...j,{placement:r,overflows:N}],!N.every((t=>t<=0))){var $,V;const t=((null==($=i.flip)?void 0:$.index)||0)+1,n=M[t];if(n&&("alignment"!==p||O===h(n)||j.every((t=>h(t.placement)!==O||t.overflows[0]>0))))return{data:{index:t,overflows:j},reset:{placement:n}};let e=null==(V=j.filter((t=>t.overflows[0]<=0)).sort(((t,n)=>t.overflows[1]-n.overflows[1]))[0])?void 0:V.placement;if(!e)switch(w){case"bestFit":{var W;const t=null==(W=j.filter((t=>{if(L){const n=h(t.placement);return n===O||"y"===n}return!0})).map((t=>[t.placement,t.overflows.filter((t=>t>0)).reduce(((t,n)=>t+n),0)])).sort(((t,n)=>t[1]-n[1]))[0])?void 0:W[0];t&&(e=t);break}case"initialPlacement":e=c}if(r!==e)return{reset:{placement:e}}}return{}}}},Ct=function(t){return void 0===t&&(t={}),{name:"hide",options:t,async fn(n){const{rects:e}=n,{strategy:o="referenceHidden",...r}=u(t,n);switch(o){case"referenceHidden":{const t=F(await D(n,{...r,elementContext:"reference"}),e.reference);return{data:{referenceHiddenOffsets:t,referenceHidden:O(t)}}}case"escaped":{const t=F(await D(n,{...r,altBoundary:!0}),e.floating);return{data:{escapedOffsets:t,escaped:O(t)}}}default:return{}}}}},Pt=t=>({name:"arrow",options:t,async fn(n){const{x:e,y:r,placement:i,rects:a,platform:c,elements:l,middlewareData:f}=n,{element:m,padding:y=0}=u(t,n)||{};if(null==m)return{};const h=C(y),g={x:e,y:r},x=w(i),v=p(x),b=await c.getDimensions(m),A="y"===x,S=A?"top":"left",k=A?"bottom":"right",P=A?"clientHeight":"clientWidth",R=a.reference[v]+a.reference[x]-g[x]-a.floating[v],D=g[x]-a.reference[x],F=await(null==c.getOffsetParent?void 0:c.getOffsetParent(m));let O=F?F[P]:0;O&&await(null==c.isElement?void 0:c.isElement(F))||(O=l.floating[P]||a.floating[v]);const T=R/2-D/2,B=O/2-b[v]/2-1,H=o(h[S],B),L=o(h[k],B),M=H,E=O-b[v]-L,N=O/2-b[v]/2+T,j=s(M,N,E),$=!f.arrow&&null!=d(i)&&N!==j&&a.reference[v]/2-(N<M?H:L)-b[v]/2<0,V=$?N<M?N-M:N-E:0;return{[x]:g[x]+V,data:{[x]:j,centerOffset:N-j-V,...$&&{alignmentOffset:V}},reset:$}}}),Rt=(t,n,e)=>{const o=new Map,r={platform:vt,...e},i={...r.platform,_c:o};return(async(t,n,e)=>{const{placement:o="bottom",strategy:r="absolute",middleware:i=[],platform:a}=e,c=i.filter(Boolean),l=await(null==a.isRTL?void 0:a.isRTL(n));let s=await a.getElementRects({reference:t,floating:n,strategy:r}),{x:u,y:f}=R(s,o,l),d=o,m={},p=0;for(let e=0;e<c.length;e++){const{name:i,fn:y}=c[e],{x:h,y:w,data:g,reset:x}=await y({x:u,y:f,initialPlacement:o,placement:d,strategy:r,middlewareData:m,rects:s,platform:a,elements:{reference:t,floating:n}});u=null!=h?h:u,f=null!=w?w:f,m={...m,[i]:{...m[i],...g}},x&&p<=50&&(p++,"object"==typeof x&&(x.placement&&(d=x.placement),x.rects&&(s=!0===x.rects?await a.getElementRects({reference:t,floating:n,strategy:r}):x.rects),({x:u,y:f}=R(s,d,l))),e=-1)}return{x:u,y:f,placement:d,strategy:r,middlewareData:m}})(t,n,{...r,platform:i})};export{Pt as a,At as b,Rt as c,kt as f,Ct as h,bt as o,St as s}