import{r as t,h as r,H as i}from"./p-0ee570cd.js";import{e as a,h as o}from"./p-3c9aa206.js";import{S as s}from"./p-e51bb952.js";import{d as e}from"./p-cbdd7a99.js";var n=function(t,r,i,a){var o,s=arguments.length,e=s<3?r:null===a?a=Object.getOwnPropertyDescriptor(r,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(t,r,i,a);else for(var n=t.length-1;n>=0;n--)(o=t[n])&&(e=(s<3?o(e):s>3?o(r,i,e):o(r,i))||e);return s>3&&e&&Object.defineProperty(r,i,e),e};const c=class{constructor(r){t(this,r),this.variant="rounded",this.iconPack=a,this.t=o(),this.page=1,this.pageCount=0,this.activeCount=0,this.activeComputedCount=0,this.showPagination=!1,this.onPageChanged=({currentPage:t,pageCount:r})=>{this.pageCount=r,this.page=t},this.toggleGridPagination=e((()=>{var t;const{self:r,participants:i}=this.meeting,{mobile:a,desktop:o}=null===(t=r.config)||void 0===t?void 0:t.maxVideoStreams,s="sm"===this.size?a:o,e=i.joined.toArray().filter((t=>"ON_STAGE"===t.stageStatus)).length;this.showPagination=!(e<s)}),50),this.onParticipantJoin=e((()=>{this.pageCount=this.meeting.participants.pageCount,this.toggleGridPagination()}),50),this.onParticipantLeave=e((()=>{this.pageCount=this.meeting.participants.pageCount,this.toggleGridPagination()}),50),this.onStateStatusUpdate=e((()=>{this.pageCount=this.meeting.participants.pageCount,this.toggleGridPagination()}),50),this.prevPage=()=>{if(!this.meeting)return;const{participants:t}=this.meeting;this.page>1?t.setPage(this.page-=1):"PAGINATED"===t.viewMode&&t.setViewMode("ACTIVE_GRID")},this.nextPage=()=>{if(!this.meeting)return;const{participants:t}=this.meeting;this.page>0&&this.page<this.pageCount?t.setPage(this.page+=1):t.count>0&&0===this.pageCount&&t.setViewMode("PAGINATED")}}connectedCallback(){this.meetingChanged(this.meeting),this.sizeChanged()}disconnectedCallback(){if(!this.meeting)return;const{participants:t,stage:r}=this.meeting;t.removeListener("pageChanged",this.onPageChanged),t.removeListener("viewModeChanged",this.onPageChanged),t.joined.removeListener("participantJoined",this.onParticipantJoin),t.joined.removeListener("participantLeft",this.onParticipantLeave),t.joined.removeListener("stageStatusUpdate",this.onStateStatusUpdate),r.removeListener("stageStatusUpdate",this.onStateStatusUpdate)}meetingChanged(t){if(null!=t){const{stage:r,participants:i}=t;this.page=i.currentPage,this.pageCount=i.pageCount,i.addListener("viewModeChanged",this.onPageChanged),i.addListener("pageChanged",this.onPageChanged),i.joined.addListener("participantJoined",this.onParticipantJoin),i.joined.addListener("participantLeft",this.onParticipantLeave),i.joined.addListener("stageStatusUpdate",this.onStateStatusUpdate),r.addListener("stageStatusUpdate",this.onStateStatusUpdate),this.activeCount=this.meeting.participants.joined.size,this.activeComputedCount=this.meeting.participants.joined.size,this.toggleGridPagination()}}sizeChanged(){this.toggleGridPagination()}render(){if(!this.meeting)return null;const{meta:t}=this.meeting;return"AUDIO_ROOM"!==(null==t?void 0:t.viewType)&&this.showPagination?r(i,null,r("rtk-button",{class:"prev",variant:"secondary",kind:"icon",disabled:0===this.pageCount,onClick:this.prevPage,"aria-label":this.t("page.prev")},r("rtk-icon",{icon:this.iconPack.chevron_left})),"grid"!==this.variant&&r("div",{class:"center"},r("span",{class:"page"},0===this.pageCount?r("rtk-tooltip",{label:this.t("layout.auto")},r("rtk-button",{kind:"icon",class:"auto"},r("rtk-icon",{icon:this.iconPack.wand}))):this.page),0!==this.pageCount&&[r("span",{class:"slash"},"/"),r("span",{class:"pages"},this.pageCount)]),"grid"===this.variant&&this.pageCount>0&&r("div",{class:"dots"},[...Array(this.pageCount)].map(((t,i)=>r("div",{key:`dot-${i}`,class:{dot:!0,active:i+1===this.page}})))),r("rtk-button",{class:"next",variant:"secondary",kind:"icon",disabled:0!==this.page&&this.page===this.pageCount,onClick:this.nextPage,"aria-label":this.t("page.next")},r("rtk-icon",{icon:this.iconPack.chevron_right,tabIndex:-1,"aria-hidden":!0}))):r(i,{"data-hidden":!0})}static get watchers(){return{meeting:["meetingChanged"],size:["sizeChanged"]}}};n([s()],c.prototype,"meeting",void 0),n([s()],c.prototype,"states",void 0),n([s()],c.prototype,"iconPack",void 0),n([s()],c.prototype,"t",void 0),c.style=":host{line-height:initial;font-family:var(--rtk-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--rtk-space-0, 0px);padding:var(--rtk-space-0, 0px)}:host{display:flex;-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center;font-size:16px}:host([data-hidden]){display:none}:host([size='sm']){font-size:12px}:host([size='sm']) .center{margin-left:var(--rtk-space-0, 0px);margin-right:var(--rtk-space-0, 0px)}:host([size='sm']) rtk-button{height:var(--rtk-space-7, 28px);width:var(--rtk-space-7, 28px)}:host([size='sm']) rtk-button rtk-icon{height:var(--rtk-space-4, 16px);width:var(--rtk-space-4, 16px)}rtk-button{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.center{margin-left:var(--rtk-space-2, 8px);margin-right:var(--rtk-space-2, 8px);color:rgb(var(--rtk-colors-text-700, 255 255 255 / 0.64))}.center .page{color:rgb(var(--rtk-colors-text-900, 255 255 255 / 0.88))}.center .slash{margin-left:var(--rtk-space-0\\.5, 2px);margin-right:var(--rtk-space-0\\.5, 2px)}.center .pages{align-self:flex-end;font-size:12px}:host([variant='rounded']){overflow:hidden;border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--rtk-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}:host([variant='rounded']) rtk-button{border-radius:9999px;border-width:var(--rtk-border-width-none, 0);border-style:none;background-color:transparent;color:rgb(var(--rtk-colors-text-700, 255 255 255 / 0.64));transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}:host([variant='rounded']) rtk-button:not([disabled]):hover{--tw-bg-opacity:1;background-color:rgba(var(--rtk-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='rounded']) rtk-button:not([disabled]):focus{--tw-bg-opacity:1;background-color:rgba(var(--rtk-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='grid']) rtk-button{position:absolute;top:50%;height:var(--rtk-space-20, 80px);width:var(--rtk-space-20, 80px);opacity:0.2;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}:host([variant='grid']) rtk-button:hover{opacity:1}:host([variant='grid']) rtk-button{transform:translateY(-50%)}:host([variant='grid']) rtk-button.prev{left:var(--rtk-space-0, 0px);border-top-right-radius:9999px;border-bottom-right-radius:9999px}:host([variant='grid']) rtk-button.next{right:var(--rtk-space-0, 0px);border-top-left-radius:9999px;border-bottom-left-radius:9999px}:host([variant='grid']) rtk-button.auto{left:var(--rtk-space-0, 0px);right:var(--rtk-space-0, 0px);border-top-right-radius:9999px;border-bottom-right-radius:9999px}:host([variant='grid']) .dots{position:absolute;left:50%;bottom:var(--rtk-space-3, 12px);display:flex;align-items:center;transform:translateX(-50%)}:host([variant='grid']) .dots .dot{margin-right:var(--rtk-space-2, 8px);height:var(--rtk-space-2, 8px);width:var(--rtk-space-2, 8px);cursor:pointer;border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--rtk-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([variant='grid']) .dots .dot:last-child{margin-right:var(--rtk-space-0, 0px)}:host([variant='grid']) .dots .dot.active{--tw-bg-opacity:1;background-color:rgba(var(--rtk-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}:host([variant='grid'][size='sm']) rtk-button{height:var(--rtk-space-14, 56px);width:var(--rtk-space-14, 56px);opacity:0.1}";export{c as rtk_grid_pagination}