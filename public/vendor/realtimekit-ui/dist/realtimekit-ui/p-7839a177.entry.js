import{r as t,w as r,h as i,H as a,c as e}from"./p-0ee570cd.js";import{e as o,h as s,c as n}from"./p-3c9aa206.js";import{S as c}from"./p-e51bb952.js";import{f as l,s as p}from"./p-338c7261.js";var d=function(t,r,i,a){var e,o=arguments.length,s=o<3?r:null===a?a=Object.getOwnPropertyDescriptor(r,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,r,i,a);else for(var n=t.length-1;n>=0;n--)(e=t[n])&&(s=(o<3?e(s):o>3?e(r,i,s):e(r,i))||s);return o>3&&s&&Object.defineProperty(r,i,s),s};const h=class{constructor(r){t(this,r),this.iconPack=o,this.t=s(),this.canClosePlugin=!1,this.viewModeEnabled=!1,this.onIframeRef=t=>{var r;t!==this.iframeEl&&(this.iframeEl=t,null===(r=this.plugin)||void 0===r||r.addPluginView(t,"plugin-main"))},this.canInteractWithPlugin=()=>{const t=this.plugin.id;if(!t)return!0;const r=this.meeting.self.permissions.plugins.config[t];return!r||!r.accessControl||"FULL_ACCESS"===r.accessControl}}componentDidLoad(){this.meetingChanged(this.meeting),this.pluginChanged(this.plugin)}meetingChanged(t){if(!t)return;const i=this.canInteractWithPlugin();this.viewModeEnabled=!i,r((()=>{this.canClosePlugin=t.self.permissions.plugins.canClose||this.plugin.enabledBy===t.self.id}))}pluginChanged(t){this.toggleViewModeListener=t=>{this.canInteractWithPlugin()||(this.viewModeEnabled=t)},null!=t&&(this.iframeEl&&t.addPluginView(this.iframeEl,"plugin-main"),t.addListener("toggleViewMode",this.toggleViewModeListener))}disconnectedCallback(){var t,r;null===(t=this.plugin)||void 0===t||t.removePluginView("plugin-main"),null===(r=this.plugin)||void 0===r||r.removeListener("toggleViewMode",this.toggleViewModeListener)}render(){return null==this.plugin?null:i(a,null,i("header",{part:"header"},i("div",null,this.plugin.name),this.canClosePlugin&&i("div",null,i("rtk-button",{kind:"icon",onClick:()=>this.plugin.deactivate(),part:"button"},i("rtk-icon",{icon:this.iconPack.dismiss})))),i("div",{class:"iframe-container"},!this.canInteractWithPlugin()&&this.viewModeEnabled?i("div",{class:"block-inputs"}):null,i("iframe",{ref:t=>this.onIframeRef(t),part:"iframe"})))}static get watchers(){return{meeting:["meetingChanged"],plugin:["pluginChanged"]}}};d([c()],h.prototype,"meeting",void 0),d([c()],h.prototype,"iconPack",void 0),d([c()],h.prototype,"t",void 0),h.style=":host{line-height:initial;font-family:var(--rtk-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--rtk-space-0, 0px);padding:var(--rtk-space-0, 0px)}:host{display:flex;height:100%;width:100%;flex-direction:column;overflow:hidden;border-radius:var(--rtk-border-radius-lg, 12px);color:rgb(var(--rtk-colors-text-1000, 255 255 255))}header{display:flex;height:var(--rtk-space-8, 32px);align-items:center;justify-content:space-between;padding-left:var(--rtk-space-3, 12px);padding-right:var(--rtk-space-3, 12px);--tw-bg-opacity:1;background-color:rgba(var(--rtk-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}header>div{display:flex;align-items:center}rtk-button{display:flex;height:var(--rtk-space-5, 20px);width:var(--rtk-space-5, 20px);flex-direction:column;align-items:center;border-radius:9999px}rtk-button rtk-icon{height:var(--rtk-space-3, 12px);width:var(--rtk-space-3, 12px)}iframe{display:block;flex:1 1 0%;margin:var(--rtk-space-0, 0px);border-width:var(--rtk-border-width-none, 0);border-style:none;padding:var(--rtk-space-0, 0px);outline:2px solid transparent;outline-offset:2px;--tw-bg-opacity:1;background-color:rgba(var(--rtk-colors-video-bg, 24 24 24) / var(--tw-bg-opacity))}.iframe-container{position:relative;height:100%;width:100%}.block-inputs{position:absolute;z-index:10;height:100%;width:100%;border-left-width:var(--rtk-border-width-none, 0);border-top-width:var(--rtk-border-width-lg, 4px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--rtk-colors-danger, 255 45 45) / var(--tw-border-opacity))}iframe{height:100%;width:100%}";var v=function(t,r,i,a){var e,o=arguments.length,s=o<3?r:null===a?a=Object.getOwnPropertyDescriptor(r,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,r,i,a);else for(var n=t.length-1;n>=0;n--)(e=t[n])&&(s=(o<3?e(s):o>3?e(r,i,s):e(r,i))||s);return o>3&&s&&Object.defineProperty(r,i,s),s};const g=class{constructor(r){t(this,r),this.tabChange=e(this,"tabChange",7),this.config=n(),this.layout="row",this.iconPack=o,this.t=s(),this.tabs=[]}render(){return i(a,{key:"f586079ea469d413cdd8c2bb495bb06d9315417c"},i("rtk-spotlight-indicator",{key:"b9d139ef77a33c6470f4cbd7af1f7ded017b197d",meeting:this.meeting,iconPack:this.iconPack,t:this.t,size:this.size}),this.tabs.map((t=>{var r,a,e,o,s;let n=!1;if(("plugin"===(null===(r=this.activeTab)||void 0===r?void 0:r.type)&&t.plugin&&(null===(a=this.activeTab)||void 0===a?void 0:a.plugin.id)===t.plugin.id||"screenshare"===(null===(e=this.activeTab)||void 0===e?void 0:e.type)&&t.participant&&(null===(o=this.activeTab)||void 0===o?void 0:o.participant.id)===t.participant.id)&&(n=!0),"screenshare"===t.type){const r=t.participant,a=l(r.name);return i("rtk-button",{title:`${a}'s Screen Share`,key:t.participant.id,kind:"icon",variant:n?"primary":"secondary",class:{tab:!0,active:n},onClick:()=>this.tabChange.emit(t)},i("div",{class:"center col"},i("rtk-icon",{icon:this.iconPack.share_screen_person}),i("span",{class:"name"},r.id===(null===(s=this.meeting)||void 0===s?void 0:s.self.id)?this.t("you"):p(a,6))))}if("plugin"===t.type){const r=t.plugin;return i("rtk-button",{title:r.name,key:r.id,kind:"icon",variant:n?"primary":"secondary",class:{tab:!0,active:n},onClick:()=>this.tabChange.emit(t)},i("div",{class:"center col"},i("img",{src:r.picture}),i("span",{class:"name"},p(r.name,6))))}})))}};v([c()],g.prototype,"meeting",void 0),v([c()],g.prototype,"states",void 0),v([c()],g.prototype,"config",void 0),v([c()],g.prototype,"iconPack",void 0),v([c()],g.prototype,"t",void 0),g.style=".scrollbar{scrollbar-width:thin;scrollbar-color:var(--rtk-scrollbar-color, rgb(var(--rtk-colors-background-600, 60 60 60)))\n    var(--rtk-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--rtk-space-1\\.5, 6px);width:var(--rtk-space-1\\.5, 6px);border-radius:9999px;background-color:var(--rtk-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--rtk-scrollbar-color, rgb(var(--rtk-colors-background-600, 60 60 60)))}:host{box-sizing:border-box;display:flex;height:100%;width:var(--rtk-space-16, 64px);flex-direction:column;gap:var(--rtk-space-2, 8px);overflow-y:auto;font-family:var(--rtk-font-family, sans-serif)}rtk-button{z-index:10}.col{display:flex;flex-direction:column;align-items:center}.tab{display:flex;height:var(--rtk-space-16, 64px);width:var(--rtk-space-16, 64px);align-items:center;justify-content:center;margin-bottom:var(--rtk-space-2, 8px);font-size:12px;--tw-bg-opacity:1;background-color:rgba(var(--rtk-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.tab.active{--tw-bg-opacity:1;background-color:rgba(var(--rtk-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}.tab img{height:var(--rtk-space-7, 28px);width:var(--rtk-space-7, 28px);border-radius:var(--rtk-border-radius-sm, 4px)}.tab .name{margin-top:var(--rtk-space-0\\.5, 2px)}:host([size='sm']){flex-direction:column;margin-top:var(--rtk-space-4, 16px);height:var(--rtk-space-16, 64px);width:100%;flex-direction:row;gap:var(--rtk-space-2, 8px);overflow-x:auto}:host([size='sm']) .tab{margin:var(--rtk-space-0, 0px);text-overflow:clip;min-width:100px;height:40px}:host([size='sm']) .tab .col{display:flex;flex-direction:row;align-items:center;gap:var(--rtk-space-2, 8px)}:host([size='sm']) .tab .col img,:host([size='sm']) .tab .col rtk-icon{height:var(--rtk-space-6, 24px);width:var(--rtk-space-6, 24px)}:host([size='sm']) .tab .col .name{gap:var(--rtk-space-1, 4px)}:host([layout='column']){flex-direction:column}:host([layout='column']) .aside{flex:2;max-width:100%;width:100%}@media (orientation: portrait){:host([size='sm']){margin-top:var(--rtk-space-2, 8px);height:var(--rtk-space-16, 64px);width:100%;flex-direction:row;transition:all 0.3s linear}:host([size='md']){height:var(--rtk-space-24, 96px);width:100%;flex-direction:row;transition:all 0.3s linear}:host .tab{margin:var(--rtk-space-0, 0px)}}@media (orientation: landscape){:host([size='sm']){margin-right:var(--rtk-space-4, 16px);height:100%;width:var(--rtk-space-14, 56px);flex-direction:row;gap:var(--rtk-space-2, 8px);overflow-y:auto;overflow-x:hidden;transition:all 0.3s linear}:host([size='md']){margin-right:var(--rtk-space-4, 16px);height:100%;width:var(--rtk-space-14, 56px);flex-direction:row;gap:var(--rtk-space-2, 8px);overflow-y:auto;overflow-x:hidden;transition:all 0.3s linear}:host .tab{margin:var(--rtk-space-0, 0px)}:host([size='sm']) .tab{margin:var(--rtk-space-0, 0px);width:100%;text-overflow:clip;min-width:0px;min-height:40px}:host([size='sm']) .tab .col{display:flex;flex-direction:column;align-items:center;gap:var(--rtk-space-2, 8px);font-size:10px}:host([size='sm']) .tab .col img,:host([size='sm']) .tab .col rtk-icon{height:var(--rtk-space-3, 12px);width:var(--rtk-space-3, 12px)}:host([size='sm']) .tab .col .name{gap:var(--rtk-space-1, 4px)}}";export{h as rtk_plugin_main,g as rtk_tab_bar}