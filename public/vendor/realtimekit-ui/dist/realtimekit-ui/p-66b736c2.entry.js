import{r as t,c as i,h as e,F as r,H as o}from"./p-0ee570cd.js";import{s as a}from"./p-338c7261.js";import{c as n,e as s,h as c,M as l}from"./p-3c9aa206.js";import{R as d}from"./p-c8eaa707.js";import{S as p}from"./p-e51bb952.js";var h=function(t,i,e,r){var o,a=arguments.length,n=a<3?i:null===r?r=Object.getOwnPropertyDescriptor(i,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,i,e,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(n=(a<3?o(n):a>3?o(i,e,n):o(i,e))||n);return a>3&&n&&Object.defineProperty(i,e,n),n};const v=class{constructor(e){t(this,e),this.stateUpdate=i(this,"rtkStateUpdate",7),this.config=n(),this.iconPack=s,this.t=c(),this.isJoining=!1,this.canEditName=!0,this.canProduceAudio=!0,this.socketStateUpdate=({state:t})=>{this.connectionState=t,"failed"===t&&(this.isJoining=!1)},this.join=async()=>{var t,i,e;if(""!==(null===(t=this.displayName)||void 0===t?void 0:t.trim())&&!this.isJoining){this.isJoining=!0,null===(i=this.meeting)||void 0===i||i.self.setName(this.displayName),l.setItem("rtk-display-name",this.displayName);try{await(null===(e=this.meeting)||void 0===e?void 0:e.joinRoom())}catch(t){this.isJoining=!1}}}}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.meeting.meta.removeListener("socketConnectionUpdate",this.socketStateUpdate)}componentDidLoad(){var t;null===(t=this.inputEl)||void 0===t||t.focus()}meetingChanged(t){var i,e,r;t&&(this.connectionState=null===(i=t.meta.socketState)||void 0===i?void 0:i.state,this.canEditName=null===(e=t.self.permissions.canEditDisplayName)||void 0===e||e,this.displayName=(null===(r=t.self.name)||void 0===r?void 0:r.trim())||(this.canEditName?"":"Participant"),t.meta.addListener("socketConnectionUpdate",this.socketStateUpdate))}render(){var t,i,n,s,c,l;if(!this.meeting)return;const p=""===(null===(t=this.displayName)||void 0===t?void 0:t.trim())||"connected"!==this.connectionState||this.isJoining,h={meeting:this.meeting,config:this.config,states:this.states,size:this.size,iconPack:this.iconPack,t:this.t},v=null===(s=null===(n=null===(i=this.meeting)||void 0===i?void 0:i.meta)||void 0===n?void 0:n.meetingTitle)||void 0===s?void 0:s.trim();return e(o,null,e("div",{class:"container"},e("div",{class:"container-tile"},e(d,{element:"rtk-participant-tile",defaults:h,props:{participant:null===(c=this.meeting)||void 0===c?void 0:c.self,size:"md",isPreview:!0},childProps:{participant:null===(l=this.meeting)||void 0===l?void 0:l.self,size:"md"},deepProps:!0}),e("div",{class:"media-selectors"},e("rtk-microphone-selector",Object.assign({},h,{variant:"inline"})),e("rtk-camera-selector",Object.assign({},h,{variant:"inline"})),e("rtk-speaker-selector",Object.assign({},h,{variant:"inline"})))),e("div",{class:"metadata"},v&&""!==v&&e("div",{class:"meeting-title"},v),this.canEditName?e(r,null,e("div",{class:"join-as"},this.t("setup_screen.join_in_as")),e("input",{placeholder:this.t("setup_screen.your_name"),value:this.displayName,spellcheck:!1,autoFocus:!0,ref:t=>{this.inputEl=t},onInput:t=>{this.displayName=t.target.value},onKeyDown:t=>{"Enter"===t.key&&this.join()}})):e("div",{class:"uneditable-name"},e("span",{class:"text"},this.t("setup_screen.join_in_as")," ")," ",e("div",{class:"name"},a(this.displayName,20))),e("rtk-button",{size:"lg",kind:"wide",onClick:this.join,disabled:p},this.isJoining?e("rtk-spinner",{iconPack:this.iconPack}):this.t("join")),"connected"!==this.connectionState&&e("div",{class:"no-network-badge"},e("rtk-icon",{size:"md",variant:"danger",icon:this.iconPack.disconnected}),this.t("failed"===this.connectionState?"network.lost_extended":"network.lost")))))}static get watchers(){return{meeting:["meetingChanged"]}}};h([p()],v.prototype,"meeting",void 0),h([p()],v.prototype,"states",void 0),h([p()],v.prototype,"config",void 0),h([p()],v.prototype,"iconPack",void 0),h([p()],v.prototype,"t",void 0),v.style=":host{line-height:initial;font-family:var(--rtk-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--rtk-space-0, 0px);padding:var(--rtk-space-0, 0px)}:host{box-sizing:border-box;padding:var(--rtk-space-4, 16px);height:100%;min-height:100%;width:100%;display:flex;place-items:center;justify-content:center;--rtk-controlbar-button-background-color:rgb(var(--rtk-colors-background-700, 44 44 44))}.container{width:100%;max-width:1080px;display:flex;align-items:center;justify-content:space-evenly;gap:var(--rtk-space-4, 16px)}.container-tile{display:flex;height:100%;width:100%;max-width:584px;flex-direction:column;gap:var(--rtk-space-2, 8px)}.metadata{display:flex;width:100%;max-width:var(--rtk-space-80, 320px);flex-direction:column;align-items:center;text-align:center}.meeting-title{margin-bottom:var(--rtk-space-4, 16px);text-align:center;font-size:24px;font-weight:500}.join-as{margin:var(--rtk-space-0, 0px);margin-bottom:var(--rtk-space-4, 16px);text-align:center;font-size:16px;letter-spacing:-0.025em;color:rgb(var(--rtk-colors-text-600, 255 255 255 / 0.52));overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.uneditable-name{margin-bottom:var(--rtk-space-6, 24px)}.uneditable-name .text,.uneditable-name .name{display:inline-block}.uneditable-name .name{font-size:16px;font-weight:500}input{margin-bottom:var(--rtk-space-6, 24px);display:block;height:var(--rtk-space-10, 40px);width:100%;max-width:var(--rtk-space-80, 320px);border-radius:var(--rtk-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--rtk-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--rtk-space-3, 12px);padding-right:var(--rtk-space-3, 12px);color:rgb(var(--rtk-colors-text-1000, 255 255 255));box-sizing:border-box;font-size:16px;outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}input::-moz-placeholder{color:rgb(var(--rtk-colors-text-600, 255 255 255 / 0.52))}input::placeholder{color:rgb(var(--rtk-colors-text-600, 255 255 255 / 0.52))}input{border:var(--rtk-border-width-sm, 1px) solid rgb(var(--rtk-colors-background-600, 60 60 60))}input:focus{--tw-border-opacity:1;border-color:rgba(var(--rtk-colors-brand-500, 33 96 253) / var(--tw-border-opacity))}rtk-spinner{color:rgb(var(--rtk-colors-text-1000, 255 255 255));--icon-size:var(--rtk-space-8, 32px)}:host([size='sm']) .container,:host([size='md']) .container{height:100%;flex-direction:column;justify-content:space-evenly}:host([size='sm']) .container-tile,:host([size='md']) .container-tile{height:-moz-min-content;height:min-content;flex-direction:column;justify-content:center}rtk-participant-tile{height:auto;width:100%;max-width:584px}.media-selectors{display:flex;flex-direction:column;justify-content:space-between}.media-selectors .row{display:grid;grid-template-columns:repeat(2, minmax(0, 1fr))}.no-network-badge{margin-top:var(--rtk-space-2, 8px);display:flex;width:100%;flex-direction:row;align-items:center;justify-content:flex-start;border-radius:var(--rtk-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--rtk-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));background-color:rgba(var(--rtk-colors-danger, 255 45 45) / 0.1);padding-top:var(--rtk-space-1, 4px);padding-bottom:var(--rtk-space-1, 4px);font-size:12px;color:rgba(var(--rtk-colors-danger, 255 45 45) / 0.75)}.no-network-badge rtk-icon{margin-left:var(--rtk-space-2, 8px);margin-right:var(--rtk-space-2, 8px)}";export{v as rtk_setup_screen}