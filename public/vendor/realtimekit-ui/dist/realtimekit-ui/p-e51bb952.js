import{a as e}from"./p-0ee570cd.js";import{u as t,O as o,P as r}from"./p-3c9aa206.js";function n(){return function(n,s){const{connectedCallback:c,disconnectedCallback:a}=n;n.connectedCallback=function(){const n=e(this),a=n[s];n[`_rtkStoreToCleanup-${s}`]=t,a||(n[s]=t.state[s],o(s,n,t));const d=e=>{if(e.detail.requestId===n._storeRequestId){const c=e.detail.store.state[s];n.componentOnReady().then((()=>{n[s]=c})),o(s,n,e.detail.store),n[`_rtkStoreToCleanup-${s}`]=e.detail.store,r(s,n,t)}};n[`_rtkStoreResponseListener-${s}`]=d,document.addEventListener("rtkProvideStore",d);const u=`${n.tagName}-${Date.now()}-${Math.random()}`;n._storeRequestId=u;const i=new CustomEvent("rtkRequestStore",{detail:{element:n,propName:s,requestId:u},bubbles:!0,composed:!0});n.dispatchEvent(i);const l=()=>{const e=`${n.tagName}-${Date.now()}-${Math.random().toString(36)}`;n._storeRequestId=e;const t=new CustomEvent("rtkRequestStore",{detail:{element:n,propName:s,requestId:e},bubbles:!0,composed:!0});n.dispatchEvent(t)};return n[`_rtkStoreReadyListener-${s}`]=l,document.addEventListener("rtkPeerStoreReady",l),null==c?void 0:c.call(this)},n.disconnectedCallback=function(){const t=e(this);r(s,t,t[`_rtkStoreToCleanup-${s}`]);const o=t[`_rtkStoreResponseListener-${s}`];o&&(document.removeEventListener("rtkProvideStore",o),delete t[`_rtkStoreResponseListener-${s}`]);const n=t[`_rtkStoreReadyListener-${s}`];return n&&(document.removeEventListener("rtkPeerStoreReady",n),delete t[`_rtkStoreReadyListener-${s}`]),null==a?void 0:a.call(this)}}}export{n as S}